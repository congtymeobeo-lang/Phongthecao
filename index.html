<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PhongCard Gift Hub</title>
  <style>
    body { font-family: Arial, sans-serif; margin:0; background:#0f1724; color:#fff; }
    header { background:#1e293b; padding:10px 20px; display:flex; justify-content:space-between; align-items:center; }
    header h1 { margin:0; font-size:20px; color:#38bdf8; }
    nav button { background:none; border:0; color:#fff; margin-left:10px; cursor:pointer; }
    main { padding:20px; }
    .card { background:#1e293b; padding:15px; border-radius:10px; margin-bottom:15px; }
    input, button { padding:8px; border-radius:6px; border:none; margin-top:6px; }
    button { background:#38bdf8; color:#000; font-weight:bold; cursor:pointer; }
    #wheel { width:250px; height:250px; border-radius:50%; border:8px solid #38bdf8; margin:20px auto; display:flex; align-items:center; justify-content:center; transition:transform 3s ease-out; }
    .hidden { display:none; }
    .history-item { background:#0f172a; padding:8px; border-radius:6px; margin:5px 0; font-size:14px; }
    table { width:100%; border-collapse:collapse; margin-top:10px; }
    th, td { border:1px solid #38bdf8; padding:6px; text-align:left; font-size:14px; }
    th { background:#0f233a; }
  </style>
</head>
<body>
  <header>
    <h1>üéÅ PhongCard Hub</h1>
    <nav>
      <button onclick="showPage('login')">ƒêƒÉng nh·∫≠p</button>
      <button onclick="showPage('gift')">Nh·∫≠p code</button>
      <button onclick="showPage('wheel')">V√≤ng quay</button>
      <button onclick="showPage('history')">L·ªãch s·ª≠</button>
      <button onclick="showPage('admin')">Admin</button>
    </nav>
  </header>

  <main>
    <!-- ƒêƒÉng nh·∫≠p -->
    <section id="login" class="card">
      <h2>ƒêƒÉng nh·∫≠p / ƒêƒÉng k√Ω</h2>
      <input type="text" id="username" placeholder="T√™n t√†i kho·∫£n">
      <input type="password" id="password" placeholder="M·∫≠t kh·∫©u (n·∫øu c√≥)">
      <button onclick="login()">X√°c nh·∫≠n</button>
    </section>

    <!-- Nh·∫≠p code -->
    <section id="gift" class="card hidden">
      <h2>Nh·∫≠p Giftcode</h2>
      <input type="text" id="giftcode" placeholder="Nh·∫≠p code...">
      <button onclick="redeemCode()">X√°c nh·∫≠n</button>
      <p id="giftMsg"></p>
    </section>

    <!-- V√≤ng quay -->
    <section id="wheel" class="card hidden">
      <h2>V√≤ng quay may m·∫Øn</h2>
      <div id="wheel">üé°</div>
      <button onclick="spinWheel()">Quay ngay</button>
      <p id="spinMsg"></p>
    </section>

    <!-- L·ªãch s·ª≠ -->
    <section id="history" class="card hidden">
      <h2>L·ªãch s·ª≠ nh·∫≠n th∆∞·ªüng</h2>
      <div id="historyList"></div>
    </section>

    <!-- Admin -->
    <section id="admin" class="card hidden">
      <h2>Admin Dashboard</h2>
      <div id="adminPanel" class="hidden">
        <h3>Danh s√°ch ng∆∞·ªùi ch∆°i</h3>
        <table>
          <thead>
            <tr>
              <th>T√†i kho·∫£n</th>
              <th>L∆∞·ª£t quay</th>
              <th>Code ƒë√£ d√πng</th>
              <th>L·ªãch s·ª≠ th∆∞·ªüng</th>
            </tr>
          </thead>
          <tbody id="userTable"></tbody>
        </table>
      </div>
      <p id="adminMsg"></p>
    </section>
  </main>

  <script>
    // --- Giftcode list (30 code s·∫µn) ---
    const giftcodes = [
      "PHONGCARD001","PHONGCARD002","PHONGCARD003","PHONGCARD004","PHONGCARD005",
      "PHONGCARD006","PHONGCARD007","PHONGCARD008","PHONGCARD009","PHONGCARD010",
      "PHONGCARD011","PHONGCARD012","PHONGCARD013","PHONGCARD014","PHONGCARD015",
      "PHONGCARD016","PHONGCARD017","PHONGCARD018","PHONGCARD019","PHONGCARD020",
      "PHONGCARD021","PHONGCARD022","PHONGCARD023","PHONGCARD024","PHONGCARD025",
      "PHONGCARD026","PHONGCARD027","PHONGCARD028","PHONGCARD029","PHONGCARD030"
    ];

    let currentUser = null;
    let isAdmin = false;
    let data = JSON.parse(localStorage.getItem("giftHub") || "{}");

    function saveData() {
      localStorage.setItem("giftHub", JSON.stringify(data));
    }

    function showPage(id) {
      document.querySelectorAll("main section").forEach(s => s.classList.add("hidden"));
      document.getElementById(id).classList.remove("hidden");
      if (id === "history") loadHistory();
      if (id === "admin" && isAdmin) loadAdmin();
    }

    // ƒêƒÉng nh·∫≠p
    function login() {
      const user = document.getElementById("username").value.trim();
      const pass = document.getElementById("password").value.trim();

      if (!user) return alert("Nh·∫≠p t√™n t√†i kho·∫£n!");

      // admin login
      if (user === "admin" && pass === "phong123") {
        currentUser = "admin";
        isAdmin = true;
        document.getElementById("adminMsg").innerText = "‚úÖ Admin ƒëƒÉng nh·∫≠p th√†nh c√¥ng!";
        document.getElementById("adminPanel").classList.remove("hidden");
        saveData();
        return;
      }

      currentUser = user;
      if (!data[user]) data[user] = { spins:0, history:[], usedCodes:[] };
      isAdmin = false;
      saveData();
      alert("Xin ch√†o, " + user + "!");
    }

    // Redeem code
    function redeemCode() {
      if (!currentUser || isAdmin) return alert("ƒêƒÉng nh·∫≠p b·∫±ng t√†i kho·∫£n th∆∞·ªùng!");
      const code = document.getElementById("giftcode").value.trim().toUpperCase();
      if (!giftcodes.includes(code)) {
        document.getElementById("giftMsg").innerText = "‚ùå Code kh√¥ng h·ª£p l·ªá!";
        return;
      }
      if (data[currentUser].usedCodes.includes(code)) {
        document.getElementById("giftMsg").innerText = "‚ö†Ô∏è Code n√†y ƒë√£ d√πng!";
        return;
      }
      data[currentUser].spins++;
      data[currentUser].usedCodes.push(code);
      saveData();
      document.getElementById("giftMsg").innerText = "‚úÖ Nh·∫≠n th√†nh c√¥ng 1 l∆∞·ª£t quay!";
    }

    // V√≤ng quay
    function spinWheel() {
      if (!currentUser || isAdmin) return alert("ƒêƒÉng nh·∫≠p b·∫±ng t√†i kho·∫£n th∆∞·ªùng!");
      if (data[currentUser].spins <= 0) {
        document.getElementById("spinMsg").innerText = "B·∫°n ch∆∞a c√≥ l∆∞·ª£t quay!";
        return;
      }
      data[currentUser].spins--;

      const prizes = [
        "üíµ 2,000 VND", "üíµ 3,000 VND", "üíµ 5,000 VND", "üíµ 7,000 VND",
        "üéÆ Acc Blox Fruit (Demo)", "üìñ C√¢u chuy·ªán: H√†nh tr√¨nh c·ªßa Phong"
      ];
      const result = prizes[Math.floor(Math.random()*prizes.length)];
      document.getElementById("spinMsg").innerText = "üéâ B·∫°n nh·∫≠n: " + result;
      data[currentUser].history.push({ prize: result, time: new Date().toLocaleString() });
      saveData();
    }

    // L·ªãch s·ª≠
    function loadHistory() {
      if (!currentUser || isAdmin) return;
      const list = document.getElementById("historyList");
      list.innerHTML = "";
      data[currentUser].history.forEach(h => {
        const div = document.createElement("div");
        div.className = "history-item";
        div.innerText = h.time + " ‚Üí " + h.prize;
        list.appendChild(div);
      });
    }

    // Admin dashboard
    function loadAdmin() {
      const table = document.getElementById("userTable");
      table.innerHTML = "";
      for (let user in data) {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${user}</td>
          <td>${data[user].spins}</td>
          <td>${data[user].usedCodes.join(", ") || "Ch∆∞a d√πng"}</td>
          <td>
            ${data[user].history.map(h => h.time + " ‚Üí " + h.prize).join("<br>")}
          </td>
        `;
        table.appendChild(tr);
      }
    }
  </script>
</body>
                </html>
